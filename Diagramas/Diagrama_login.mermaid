sequenceDiagram
    participant Cliente as Cliente
    participant Servidor as Servidor
    participant DAOUsers as DAOUsers
    participant BD as Base de Datos

    Cliente->>Servidor: POST /login (username, password)
    Servidor->>DAOUsers: getUserByUsernameAndPassword(username, password)
    DAOUsers->>BD: SELECT * FROM usuarios WHERE username=? AND password=?
    BD-->>DAOUsers: Resultado (usuario o null)
    DAOUsers-->>Servidor: Objeto usuario o null
    
    alt Credenciales válidas
        Servidor->>Servidor: generar_token(user_id)
        Servidor-->>Cliente: 200 OK (token, user_id, username)
        Cliente->>Cliente: guardar_token(token_data)
    else Credenciales inválidas
        Servidor-->>Cliente: 401 Unauthorized (error)
    end
